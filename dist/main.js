(()=>{"use strict";function e(e){e.value=""}function t(e){let t=document.querySelector(".main-content__to-do-list");const n=[];for(let t=0;t<e.length;t++)!0===e[t].overdue?n.push(`<div class="to-do-list__todo-item data-index="${t}"">\n        <input\n          class="todo-item__checkbox"\n          type="checkbox"\n          id="${e[t].name}"\n          name="checkbox"\n          data-index="${t}"\n          value="${e[t].name}"\n        />\n        <label class="todo-item__name" for="${e[t].name}">${e[t].name}</label>\n        <span class="todo-item__due-date--set-date overdue" data-index="${t}">${"no due date"!==e[t].dueDate?e[t].dueDate.split("-").reverse().join("."):e[t].dueDate}</span>\n        <input class="todo-item__due-date--picker hidden" data-index="${t}" type="date" name="date">\n  `):n.push(`<div class="to-do-list__todo-item data-index="${t}"">\n        <input\n          class="todo-item__checkbox"\n          type="checkbox"\n          id="${e[t].name}"\n          name="checkbox"\n          data-index="${t}"\n          value="${e[t].name}"\n        />\n        <label class="todo-item__name" for="${e[t].name}">${e[t].name}</label>\n        <span class="todo-item__due-date--set-date" data-index="${t}">${"no due date"!==e[t].dueDate?e[t].dueDate.split("-").reverse().join("."):e[t].dueDate}</span>\n        <input class="todo-item__due-date--picker hidden" data-index="${t}" type="date" name="date">\n        </div>`);t.innerHTML=n.join("")}function n(e){const n=e.target;n.classList.contains("todo-item__due-date--picker")&&(n.previousSibling.previousElementSibling.classList.remove("hidden"),n.classList.add("hidden"),u(),t(i),r())}function a(e){let t=document.querySelector(".completed"),n=document.querySelector(".completed-list__title");const a=e.map((e=>`\n      \n      <div class="completed-list__todo-item">\n      <p class="completed-list__name">${e.name}</p>\n    </div>\n          `));t.innerHTML=a.join(""),[...t.children].length>0&&n.classList.contains("hidden")&&n.classList.remove("hidden")}function o(e){document.querySelector('[data-type="total-to-dos"]').textContent=`(${e.length})`}document.querySelector(".main-content__to-do-list").addEventListener("click",(function(e){const t=e.target;t.classList.contains("todo-item__due-date--set-date")&&(t.nextSibling.nextElementSibling.classList.remove("hidden"),t.classList.add("hidden"))})),document.querySelectorAll(".main-content__to-do-list").forEach((e=>e.addEventListener("focusout",n)));class d{constructor(e,t){this.name=e,this.dueDate=t}}const i=JSON.parse(localStorage.getItem("toDoListArray")||"[]"),s=JSON.parse(localStorage.getItem("completedArray")||"[]");t(i),o(i),a(s),u();let c=document.querySelector(".add-todo__task-name");function l(n){let a=c.value,s=document.querySelector(".add-todo__due-date");if("Enter"===n.key&&""!==a){let n=new d;n.name=a,""!==s.value?n.dueDate=s.value:n.dueDate="no due date",l=n,i.push(l),u(),o(i),t(i),r(),e(c),e(s)}var l}function r(){localStorage.setItem("toDoListArray",JSON.stringify(i))}function u(){const e=new Date,n=e.getFullYear()+100*e.getMonth()+e.getDate();for(let e=0;e<i.length;e++){const t=new Date(i[e].dueDate),a=t.getFullYear()+100*t.getMonth()+t.getDate();a<n?i[e].overdue=!0:a>=n||!a?i[e].overdue=!1:console.log("none of the above")}t(i)}function m(e){if(e.target.classList.contains("todo-item__due-date--picker")){const t=e.target.dataset.index,n=e.target.value;i[t].dueDate=n}}c.addEventListener("keypress",l),document.querySelector(".main-content__add-todo").addEventListener("keypress",l),document.querySelector(".main-content__to-do-list").addEventListener("click",(function(e){if("checkbox"!==e.target.type)return;let n=parseInt(e.target.dataset.index),d=i.splice(n,1);var c;d=d[0],c=d,s.push(c),t(i),o(i),a(s),r(),localStorage.setItem("completedArray",JSON.stringify(s))})),document.querySelectorAll(".main-content__to-do-list").forEach((e=>e.addEventListener("change",m)))})();